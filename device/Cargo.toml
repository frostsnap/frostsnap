[package]
name = "frostsnap_device"
version = "0.1.0"
authors = ["nickfarrow <nick@nickfarrow.com>"]
edition = "2021"

[features]
frostypede = ["air101", "air101-r2223", "rgb-led", "mem_debug"]
ai-042c3 = ["rgb-led", "dep:display-interface", "dep:ssd1306"]
air101 = [
    "dep:display-interface-spi",
    "dep:mipidsi",
    "dep:embedded-graphics-framebuf",
]
# By default blue board uses air101-r225 but you can change it to r2223 with this flag
air101-r2223 = []
rgb-led = ["dep:esp-hal-smartled", "dep:smart-leds"]
mem_debug = []

[dependencies]
frostsnap_core = { workspace = true }
frostsnap_comms = { workspace = true }
esp-hal = { package = "esp-hal", version = "0.16.1", features = ["esp32c3"] }
#esp-hal = { git = "https://github.com/esp-rs/esp-hal", rev = "1fdfc9270e3b5505d5ed2dd3eddd077c9d4f638f" }
esp-alloc = "0.3.0"
nb = "1"
embedded-storage = "0.3.1"
esp-storage = { version = "0.3.0", features = ["esp32c3"] }
bincode = { workspace = true }
display-interface = { version = "0.4.1", optional = true }
ssd1306 = { version = "0.8", optional = true }
display-interface-spi = { version = "0.4.1", optional = true }
mipidsi = { version = "0.7.1", features = ["batch"], optional = true }
embedded-graphics-framebuf = { version = "0.5.0", optional = true }
embedded-graphics = "0.8.1"
embedded-text = "0.7.0"
esp-hal-smartled = { version = "0.9.0", features = [
    "esp32c3",
], optional = true }
smart-leds = { version = "0.4.0", optional = true }
rand_chacha = { workspace = true }

[[bin]]
name = "frostypede"
required-features = ["frostypede"]


[patch.crates-io] 
esp32 =   { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 
esp32s2 = { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 
esp32s3 = { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 
esp32c2 = { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 
esp32c3 = { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 
esp32c6 = { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 
esp32h2 = { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 
esp32p4 = { git = "https://github.com/esp-rs/esp-pacs", rev = "963c280621f0b7ec26546a5eff24a5032305437f" } 